@page
@using Cesta.Localization
@using Cesta.Web.Pages.ProductosCrud
@using Microsoft.Extensions.Localization
@using Volo.Abp.AspNetCore.Mvc.UI.Bootstrap.TagHelpers.Modal
@model CreateModalModel
@inject IStringLocalizer<CestaResource> L
@{
    Layout = null;
}

<script>
    function cambiarBase64() {
        debugger;
        const file = this.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onloadend = function () {
                const base64String = reader.result.split(',')[1];
                document.getElementById('imageBase64').value = base64String;
                alert(base64String); // Mostrar alerta con el valor base64
            }
            reader.readAsDataURL(file);
        } else {
            document.getElementById('imageBase64').value = "";
            alert("No file selected or file reading failed.");
        }
    }
</script>

<abp-modal>
    <abp-modal-header title="@L["NewProducto"].Value"></abp-modal-header>
    <abp-modal-body>
        <form method="post" enctype="multipart/form-data">
            <div class="form-group">
                <label for="nombre">@L["Nombre"]</label>
                <input type="text" class="form-control" id="nombre" name="Producto.Name" />
                <span class="text-danger" asp-validation-for="Producto.Name"></span>
            </div>

            <!-- Campo Descripción -->
            <div class="form-group">
                <label for="descripcion">@L["Descripcion"]</label>
                <textarea class="form-control" id="descripcion" asp-for="Producto.Description"></textarea>
                <span class="text-danger" asp-validation-for="Producto.Description"></span>
            </div>

            <!-- Campo Precio -->
            <div class="form-group">
                <label for="precio">@L["Precio"]</label>
                <input type="number" class="form-control" id="precio" asp-for="Producto.Price" />
                <span class="text-danger" asp-validation-for="Producto.Price"></span>
            </div>

            <!-- Campo MascotaType -->
            <div class="form-group">
                <label for="mascotaType">@L["MascotaType"]</label>
                <abp-select class="form-control" id="mascotaType" asp-for="Producto.MascotaType" asp-items="Model.SelectListMascotaType">
                </abp-select>
                <span class="text-danger" asp-validation-for="Producto.MascotaType"></span>
            </div>

            <!-- Campo ProductoType -->
            <div class="form-group">
                <label for="productoType">@L["ProductoType"]</label>
                <abp-select class="form-control" id="productoType" asp-for="Producto.ProductoType" asp-items="Model.SelectlistProductoType">
                </abp-select>
                <span class="text-danger" asp-validation-for="Producto.ProductoType"></span>
            </div>

            <!-- Campo Imagen -->
            <div class="form-group">
                <label for="imageUpload">@L["Image"]</label>
                <input type="file" accept="image/png, image/jpeg, image/jpg" class="form-control" id="imageUpload" onchange="cambiarBase64()" />
                <input id="imageBase64" type="text" name="Producto.ImageBase64" asp-for="Producto.ImageBase64" />
                <span class="text-danger" asp-validation-for="auxiliar"></span>
            </div>

            <!-- Campo Oculto -->
            <input type="hidden" id="campoOculto" name="Producto.CampoOculto" value="Valor oculto" />
            @* <abp-modal-footer buttons="@(AbpModalButtons.Cancel|AbpModalButtons.Save)"></abp-modal-footer> *@
            <button type="submit" class="btn btn-primary">Guardar</button>
        </form>
    </abp-modal-body>
</abp-modal>
